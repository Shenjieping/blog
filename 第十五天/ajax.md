## ajax 基础知识 (async javascript and xml)

- 核心四步
  - 创建Ajax实例对象
  - 打开url(发送请求前的一些处理)
  - 监听ajax的转态信息
  - 发送请求
- 请求的方式
  - GET系列 get/delete/head/options
    - get 用户获取信息，也可以传一些信息给客户端
    - delete 一般用于删除服务器上的文件或一些大量的信息
    - head 只需要获取响应头的信息
    - options 试探性请求，用于CORS跨域资源共享的时候，在每一个正常的请求之前，我们默认先发一个options请求，这个请求用来校验客户端和服务器端是否连接即可
  - POSt系列 post/put
    - 一般认为向服务器发送信息，也可以返回信息
    - put 一般用于给服务器传递文件，或大的数据

缓存问题，浏览器在处理GET请求的时候，如果两次请求的地址和参数都一致，浏览器会设置数据缓存，解决方式就是每次请求的地址都不一样

### Ajax 状态 xhr.readyState

XMLHttpRequest.prototype:

  - DONE: 4 响应主体也加载返回了
  - LOADING: 3 响应主体正在加载返回中
  - HEADERS_RECEIVED: 2 浏览器已经返回相应头信息
  - OPENED: 1 已打开，执行了open
  - UNSENT: 0 未发生，开始创建XHR默认状态是0

### HTTP网络状态码 xhr.state

  - 2开头的，服务器正常返回数据，项目中所谓的成功和失败，分为两种：1. 网络层面的（服务器没有返回任何信息或者和服务器没有连接上）。2. 业务层面的（已经从服务端获取数据，只不过获取的数据是不符合业务需要的也可以看做失败）
  - 3开头的
    - 304 读取的是协商缓存的数据
    - 301 永久重定向 一般用于域名的转移
    - 302 临时重定向 一般用于服务器的负载均衡
    - 307 临时转移
  - 4开头的
    - 400 客户端错误
  - 5开头的
    - 500 服务端发送未知错误